<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<link rel="stylesheet" type="text/css" href="greetstyle.css" />
<title>GREET - Add your own data</title>
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-40965405-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<style type="text/css">
span {
	font-family: 'Courier New';
	font-size: 10pt;
	color: #000000;
}
.sc0 {
	font-weight: bold;
}
.sc1 {
	color: #0000FF;
}
.sc3 {
	color: #FF0000;
}
.sc6 {
	font-weight: bold;
	color: #8000FF;
}
.sc8 {
}
.sc11 {
	color: #0000FF;
}
</style>
</meta>
</head>
<body style="" lang="EN-US">
<a href="index.htm">
<div id="top">
</div></a>
<div id="content">
<table border="0">
<tbody>
<tr><td>
<h1>Modifications to the API</h1>
<p>The API allows developers to create plugins that are going to be loaded by GREET. Plugins can add modifications to the user interface, database and retrieve results form the simulations.</p>
</td>
</tr>
<tr>
<td>
<h1>Changes in the 2014 API vs 2013</h1>
<p>This biggest difference is that the 2014 API contains now a lot more public classes and methods, and are organized into different name spaces. In the 2013 version a single namespace was
encapsulating all interfaces and methods. We realized quickly that even though this was very to use, it was also very limiting for the development of more complex plugins.
</p>
<p>
This is why the 2014 version of the API is now organized into different libraries and namespaces:<br>
<img style="display: block;margin-left:auto;margin-right:auto;" src="pic/api-changes-2013-2014.png" width="400"></img>
</p>
<p>
Most of the interfaces necessary for data manipulation that were in IPlugininInterfaces, are now moved into Greet.DataStructureV3. To give you some clues about what modifications where made, see the following
list of namespaces description:
<ul>
<li><b>Greet.ConvenienceLib</b>: This set of classes and methods are used to generate IDs for new entries, contains XML loading and saving helpers and compression/decompression algorithms that we use for the data file</li>
<li><b>Greet.DataStructureV3</b>: Contains the interfaces that should be used for reading/modifying the data in the software. It also contains the barebone classes used internally but we do not recommend using them as it trends to be much more complicated.</li>
<li><b>Greet.Mode</b>: Contains classes necessary to run simulation and retrieve results. One of the most important interface there is the IGreetController that is the core of all interactions with the software for the plugins</li>
<li><b>Greet.UnitLib</b>: The current unit system used in GREET. This system is slowish and non thread safe. We moved it out as a library with the intention of discarding it and use the Greet.UnitLib2 in the future which is thread safe, faster and more flexible.</li>
<li><b>Greet.UnitLib2</b>: A new unit system, that is now used throughout the main program, but that some plugins are starting to use. This is recommended for future designs as we plan on discarding the old Greet.UnitLib. The main issue is that there are no easy way not to switch from one to the other</li>
</ul>
</p>
<p>
The major changes in GREET this year was the added capability of creating non linear pathway. The internal structure of a pathway right now is an oriented graph with vertices and edges. Any inputs and outputs in the model have now a unique GUID that we used to establish connections between processes and pathways.
The process model has been changed as well and now allows multiple outputs. All allocated outputs can now be used in a pathway. We also allow a pathway to have multiple outputs as well.
</p>
<p>
What needs to be known about the new pathway representation is that:
<ul>
<li>Each process used in a pathway is a vertex with it's own GUID</li>
<li>Each process model has inputs and outputs that have their own GUID</li>
<li>The edges or connections in the pathway are now using the Vertex GUID and IOs GUID to establish links/flows</li>
<li>A pathway can have multiple outputs: One must be declared as Main Output</li>
<li>Getting results associated with a pathway will always default to the main output, unless otherwise specified</li>
<li>The outputs of a pathway are vertices as well, the pathway object stores in a member the GUID of the main output</li>
</ul>
</p>
<p>
Below is a graphical and XML representation of the same pathway:<br><br>
<img style="display: block;margin-left:auto;margin-right:auto;" src="pic/ethanol-path.png" width="600"></img>
<div style="white-space: pre; line-height: 1; background: #FFFFFF; ">
	<span class="sc0">
      </span><span class="sc1">&lt;pathway</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"51207813"</span><span class="sc8"> </span><span class="sc3">name</span><span class="sc8">=</span><span class="sc6">"Ethanol Production from Corn"</span><span class="sc8"> </span><span class="sc3">notes</span><span class="sc8">=</span><span class="sc6">""</span><span class="sc8"> </span>
	  <span class="sc3">main-output</span><span class="sc8">=</span><span class="sc6">"d5af95d2-1c01-45bf-8fa7-0355849d4330"</span><span class="sc8"> </span>
	  <span class="sc3">modified-on</span><span class="sc8">=</span><span class="sc6">"8/21/2014 11:38:32 AM"</span><span class="sc8"> </span><span class="sc3">modified-by</span><span class="sc8">=</span>
	  <span class="sc6">"de Salve de Bruneton, Laetitia lbruneton@anl.gov"</span><span class="sc1">&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;vertex</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"88cbdeca-0123-4268-9121-a62c58cfa348"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"510,15"</span><span class="sc8"> </span><span class="sc3">model-id</span><span class="sc8">=</span><span class="sc6">"601"</span><span class="sc8"> </span><span class="sc3">type</span><span class="sc8">=</span><span class="sc6">"0"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;vertex</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"f43ce55a-a237-47c6-b204-3361d8d252bf"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"510,-160"</span><span class="sc8"> </span><span class="sc3">model-id</span><span class="sc8">=</span><span class="sc6">"600"</span><span class="sc8"> </span><span class="sc3">type</span><span class="sc8">=</span><span class="sc6">"0"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;vertex</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"c99fc90d-a266-4be5-b7ab-27699590a1c0"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"-30,-72.5"</span><span class="sc8"> </span><span class="sc3">model-id</span><span class="sc8">=</span><span class="sc6">"2016"</span><span class="sc8"> </span><span class="sc3">type</span><span class="sc8">=</span><span class="sc6">"1"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;vertex</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"eb6a6b3a-e734-46d4-8e2a-b66c775d2af2"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"1000,-102.5"</span><span class="sc8"> </span><span class="sc3">model-id</span><span class="sc8">=</span><span class="sc6">"51189067"</span><span class="sc8"> </span><span class="sc3">type</span><span class="sc8">=</span><span class="sc6">"0"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;vertex</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"cea5125d-9f7e-476b-acf9-1d1352be8553"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"1490,35"</span><span class="sc8"> </span><span class="sc3">model-id</span><span class="sc8">=</span><span class="sc6">"48030"</span><span class="sc8"> </span><span class="sc3">type</span><span class="sc8">=</span><span class="sc6">"0"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"c99fc90d-a266-4be5-b7ab-27699590a1c0"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"000007e0-0000-0000-9a00-000000000000"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"88cbdeca-0123-4268-9121-a62c58cfa348"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"00000259-1111-0000-0000-000000000000"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"c99fc90d-a266-4be5-b7ab-27699590a1c0"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"000007e0-0000-0000-9a00-000000000000"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"f43ce55a-a237-47c6-b204-3361d8d252bf"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"00000258-1111-0000-0000-000000000000"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"f43ce55a-a237-47c6-b204-3361d8d252bf"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"00000258-0000-0000-0000-000000000000"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"eb6a6b3a-e734-46d4-8e2a-b66c775d2af2"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"3dc7da70-db80-4931-ad88-725e18faedb7"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"88cbdeca-0123-4268-9121-a62c58cfa348"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"00000259-0000-0000-0000-000000000000"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"eb6a6b3a-e734-46d4-8e2a-b66c775d2af2"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"0ca16585-eb91-4164-be5b-a129ca8fd7bd"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"eb6a6b3a-e734-46d4-8e2a-b66c775d2af2"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"b8a46326-685f-4f95-9a7d-eab69a0f7f8e"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"cea5125d-9f7e-476b-acf9-1d1352be8553"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"0000bb9e-1111-0000-0000-000000000000"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"eb6a6b3a-e734-46d4-8e2a-b66c775d2af2"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"b8a46326-685f-4f95-9a7d-eab69a0f7f8e"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"caab99d4-2b10-4d6e-a3f0-0fc55a5e32f5"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"caab99d4-2b10-4d6e-a3f0-0fc55a5e32f5"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;edge</span><span class="sc8"> </span><span class="sc3">output-vertex</span><span class="sc8">=</span><span class="sc6">"cea5125d-9f7e-476b-acf9-1d1352be8553"</span><span class="sc8"> </span>
		<span class="sc3">output-id</span><span class="sc8">=</span><span class="sc6">"0000bb9e-0000-0000-0000-000000000000"</span><span class="sc8"> </span>
		<span class="sc3">input-vertex</span><span class="sc8">=</span><span class="sc6">"d5af95d2-1c01-45bf-8fa7-0355849d4330"</span><span class="sc8"> </span>
		<span class="sc3">input-id</span><span class="sc8">=</span><span class="sc6">"d5af95d2-1c01-45bf-8fa7-0355849d4330"</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;output</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"caab99d4-2b10-4d6e-a3f0-0fc55a5e32f5"</span><span class="sc8"> </span><span class="sc3">resource</span><span class="sc8">=</span><span class="sc6">"36"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"1980,-20"</span><span class="sc8"> </span><span class="sc3">notes</span><span class="sc8">=</span><span class="sc6">""</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
        </span><span class="sc1">&lt;output</span><span class="sc8"> </span><span class="sc3">id</span><span class="sc8">=</span><span class="sc6">"d5af95d2-1c01-45bf-8fa7-0355849d4330"</span><span class="sc8"> </span><span class="sc3">resource</span><span class="sc8">=</span><span class="sc6">"36"</span><span class="sc8"> </span>
		<span class="sc3">location</span><span class="sc8">=</span><span class="sc6">"1980,87.5"</span><span class="sc8"> </span><span class="sc3">notes</span><span class="sc8">=</span><span class="sc6">""</span><span class="sc8"> </span><span class="sc11">/&gt;</span><span class="sc0">
      </span><span class="sc1">&lt;/pathway&gt;</span>
</div>
<br>
</p><p>
One can see in the XML representation a very close representation of what the actual class is. Note the main-output attribute and the outputs in as childs of the pathway. All vertex have a model-id which is the process model used. Each edge or connection defines vertices and IOs GUIDs
</p></td>
</tr>
</tbody>
</table>
<div id="footer-legal">
<br>
<div style="float: left">
<img style="padding: 6px 0px;" src="pic/footer_doe.png" ></img>
</div>
<div style="float: right">
<img src="pic/anl.png" height="60"></img>
</div>
<div style="text-align: center;">
<ul>
  <li><a href="http://science.energy.gov/">U.S. Department of Energy Office of Science</a></li>
  <li><a href="http://www.uchicagoargonnellc.org/">UChicago Argonne LLC</a></li>
  <li><a href="http://www.anl.gov/privacy-security-notice">Privacy & Security notice</a></li>
</ul>
</div>
</div>
</div>
</body></html>